name: ðŸ§ª Test Google Play Auth

on:
  workflow_dispatch:

jobs:
  test-auth:
    name: ðŸ›¡ï¸ Test JWT Authentication
    runs-on: ubuntu-latest

    steps:
      - name: Create Dummy AAB
        run: |
          mkdir -p build/app/outputs/bundle/release/
          echo "This is a dummy AAB for auth testing" > build/app/outputs/bundle/release/app-release.aab

      - name: Attempt Upload (Auth Check)
        uses: r0adkll/upload-google-play@v1.1.2
        with:
          serviceAccountJsonPlainText: ${{ secrets.GOOGLE_PLAY_SERVICE_ACCOUNT_JSON }}
          packageName: com.gavra013.gavra_android
          releaseFiles: build/app/outputs/bundle/release/app-release.aab
          track: internal # Use internal to be safe, though it might fail later
          status: draft # Keep it as draft
